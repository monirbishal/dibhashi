{% extends 'layout.html' %}

{% block content %}
<section
    class="relative min-h-[calc(100vh-64px)] py-20 flex flex-col items-center justify-center bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 text-white">
    <div class="absolute inset-0 opacity-30 bg-black"></div>
    <div class="relative z-10 w-full max-w-4xl px-4 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
            AI Video Translator – English to Bangla
        </h1>
        <p class="mb-10 text-lg mx-auto">
            Enter your video URL below and get instant translation with synced audio/video & downloadable content.
        </p>
        <form action="/" method="post" class="flex flex-col sm:flex-row gap-2 justify-center md:max-w-3xl mx-auto">
            <input type="url" name="media_url" required placeholder="Enter video URL"
                class="flex-grow px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300" />
            <button type="submit"
                class="px-6 py-3 cursor-pointer bg-white text-purple-700 font-semibold rounded-lg hover:bg-purple-500 hover:text-white transition">
                Translate
            </button>
        </form>
        {% if error %}
            <p class="text-red-700 text-lg py-6">{{ error }}</p>
        {% endif %}
    </div>

    {% if session_id %}
    <div class="relative z-10 container mx-auto mt-12 px-4 grid grid-cols-1 md:grid-cols-2 gap-8" id="result">
        <!-- Original Content -->
        <div class="bg-white text-black rounded-lg shadow p-6">
            <h2 class="text-xl font-bold mb-4">Original Video</h2>
            {% if transcription %}
                <h3 class="font-semibold mb-2">Transcript</h3>
                <textarea readonly spellcheck="false" class="w-full p-4 bg-gray-100 border border-gray-200 rounded resize-y min-h-[160px] focus:outline-none focus:ring-2 focus:ring-indigo-300 ">{{ transcription }}</textarea>
            {% endif %}

            <video controls class="w-full mt-4 rounded">
                <source src="{{ url_for('static', filename='downloads/' ~ session_id ~ '/input-trimmed-video.mp4') }}"
                    type="video/mp4">
                Your browser doesn’t support video playback.
            </video>
            <a href="{{ url_for('static', filename='downloads/' ~ session_id ~ '/input-trimmed-video.mp4') }}"
                class="mt-6 px-6 py-3 block bg-purple-700 text-white text-center font-semibold rounded-lg hover:bg-purple-300 transition">Download Video</a>
        </div>

        <!-- Translated Content -->
        <div class="bg-white text-black rounded-lg shadow p-6">
            <h2 class="text-xl font-bold mb-4">Translated Video</h2>
            {% if bn_text %}
                <h3 class="font-semibold mb-2">Bangla Translation</h3>
                <textarea readonly spellcheck="false" class="w-full p-4 bg-gray-100 border border-gray-200 rounded resize-y min-h-[160px] focus:outline-none focus:ring-2 focus:ring-indigo-300 ">{{ bn_text }}</textarea>
            {% endif %}

            <video controls class="w-full mt-4 rounded">
                <source src="{{ url_for('static', filename='downloads/' ~ session_id ~ '/merged_output.mp4') }}"
                    type="video/mp4">
                Your browser doesn’t support video playback.
            </video>
            <a href="{{ url_for('static', filename='downloads/' ~ session_id ~ '/merged_output.mp4') }}"
                class="mt-6 px-6 py-3 block bg-purple-700 text-white text-center font-semibold rounded-lg hover:bg-purple-300 transition">Download Translated Video</a>

        </div>
    </div>
    {% endif %}
</section>

{% endblock %}